(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-08e0f65f"],{2193:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{attrs:{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M8.77881 1.40127L6.18631 1.39502H6.18506C3.45131 1.39502 1.31006 3.53689 1.31006 6.27127C1.31006 8.83252 3.30131 10.775 5.97568 10.8775V13.27C5.97568 13.3375 6.00318 13.4488 6.05068 13.5219C6.13943 13.6625 6.29068 13.7388 6.44568 13.7388C6.53193 13.7388 6.61881 13.715 6.69693 13.665C6.86193 13.56 10.7426 11.0775 11.7519 10.2238C12.9407 9.21752 13.6519 7.74252 13.6538 6.27877V6.26814C13.6501 3.53877 11.5101 1.40127 8.77881 1.40064V1.40127ZM11.1457 9.50877C10.4369 10.1088 8.10693 11.6369 6.91318 12.4106V10.4188C6.91318 10.16 6.70381 9.95002 6.44443 9.95002H6.19693C3.90943 9.95002 2.24818 8.40252 2.24818 6.27127C2.24818 4.06252 3.97818 2.33252 6.18568 2.33252L8.77756 2.33877H8.77881C10.9863 2.33877 12.7163 4.06752 12.7176 6.27377C12.7157 7.46752 12.1288 8.67627 11.1463 9.50877H11.1457Z",fill:"#657786"}})])},s=[],n=a("2877"),i={},o=Object(n["a"])(i,r,s,!1,null,null,null);e["a"]=o.exports},"2dd1":function(t,e,a){},"498a":function(t,e,a){"use strict";var r=a("23e7"),s=a("58a8").trim,n=a("c8d2");r({target:"String",proto:!0,forced:n("trim")},{trim:function(){return s(this)}})},5899:function(t,e){t.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(t,e,a){var r=a("1d80"),s=a("5899"),n="["+s+"]",i=RegExp("^"+n+n+"*"),o=RegExp(n+n+"*$"),c=function(t){return function(e){var a=String(r(e));return 1&t&&(a=a.replace(i,"")),2&t&&(a=a.replace(o,"")),a}};t.exports={start:c(1),end:c(2),trim:c(3)}},7482:function(t,e,a){"use strict";var r=a("2fa3"),s=function(){return localStorage.getItem("token")};e["a"]={getAllTweets:function(){return r["b"].get("/tweets",{headers:{Authorization:"Bearer ".concat(s())}})},getUserTweet:function(t){var e=t.tweetId;return r["b"].get("/tweets/".concat(e),{headers:{Authorization:"Bearer ".concat(s())}})},getTweetReplies:function(t){var e=t.tweetId;return r["b"].get("/tweets/".concat(e,"/replies"),{headers:{Authorization:"Bearer ".concat(s())}})},addTweetLike:function(t){var e=t.tweetId;return r["b"].post("/tweets/".concat(e,"/like"),null,{headers:{Authorization:"Bearer ".concat(s())}}).then((function(t){return t})).catch((function(t){return t.response}))},deleteTweetLike:function(t){var e=t.tweetId;return r["b"].post("/tweets/".concat(e,"/unlike"),null,{headers:{Authorization:"Bearer ".concat(s())}}).then((function(t){return t})).catch((function(t){return t.response.data}))}}},"93c2":function(t,e,a){"use strict";a("2dd1")},a2a9:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"}},[a("path",{attrs:{d:"M12 21.6381H11.986C9.403 21.5901 1.95 14.8561 1.95 8.47812C1.95 5.41412 4.475 2.72412 7.353 2.72412C9.643 2.72412 11.183 4.30412 11.999 5.45412C12.813 4.30612 14.353 2.72412 16.644 2.72412C19.524 2.72412 22.048 5.41412 22.048 8.47912C22.048 14.8551 14.594 21.5891 12.011 21.6361H12V21.6381Z",fill:"#E0245E"}})])},s=[],n=a("2877"),i={},o=Object(n["a"])(i,r,s,!1,null,null,null);e["a"]=o.exports},c136:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"all-users-newest-tweets"},[0===t.tweets.length&&"user"===t.$route.name?a("div",{staticClass:"d-flex justify-content-center"},[a("p",{staticClass:"p-3 text-black-50"},[t._v("No tweets")])]):t._e(),0===t.tweets.length&&"user-likes"===t.$route.name?a("div",{staticClass:"d-flex justify-content-center"},[a("p",{staticClass:"p-3 text-black-50"},[t._v("No liked tweets")])]):t._e(),t._l(t.tweets,(function(e){return a("router-link",{key:e.id,staticClass:"avator-and-tweet hover-background",attrs:{to:{name:"tweet",params:{tweetId:e.id}}}},[a("router-link",{attrs:{to:{name:"user",params:{userId:e.User.id}}}},[a("img",{staticClass:"user-avator",attrs:{src:e.User.avatar||"https://i.imgur.com/S4PE66O.png",alt:""}})]),a("div",{staticClass:"w-100"},[a("div",{staticClass:"tweet-detail"},[a("router-link",{staticClass:"hover-underline",attrs:{to:{name:"user",params:{userId:e.User.id}}}},[a("div",{staticClass:"user-name"},[t._v(t._s(e.User.name))])]),a("div",[a("span",{staticClass:"at-user"},[t._v("@"+t._s(e.User.account))]),a("span",[t._v("・")]),a("span",{staticClass:"tweet-update-time"},[t._v(t._s(t._f("fromNow")(e.createdAt)))])])],1),a("div",{staticClass:"tweet-text words"},[t._v(" "+t._s(e.description)+" ")]),a("div",{staticClass:"reply-and-like-btn"},[a("div",{staticClass:"reply-container"},[a("button",{staticClass:"btn-reply",attrs:{type:"button","data-toggle":"modal","data-target":"#reply-modal"},on:{click:[function(a){return a.preventDefault(),t.getTweetForModel(e.id)},function(a){return t.updateRepliesInModal(e.id)}]}},[a("div",{staticClass:"btn-container"},[a("ReplyIcon",{staticClass:"reply-icon"}),a("p",{staticClass:"replies-count"},[t._v(t._s(e.repliesCount))])],1)])]),a("div",{staticClass:"like-container"},[e.isLiked?a("button",{staticClass:"btn-unlike",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.deleteLike(e.id)}}},[a("div",{staticClass:"btn-container"},[a("IconLikeFill",{staticClass:"unlike-icon"}),a("p",{staticClass:"likes-count"},[t._v(t._s(e.likesCount))])],1)]):a("button",{staticClass:"btn-like",attrs:{type:"button"},on:{click:function(a){return a.preventDefault(),t.addLike(e.id)}}},[a("div",{staticClass:"btn-container"},[a("LikeIcon",{staticClass:"like-icon"}),a("p",{staticClass:"likes-count"},[t._v(t._s(e.likesCount))])],1)])])])])],1)})),a("div",{staticClass:"modal fade",attrs:{id:"reply-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[a("div",{staticClass:"modal-dialog"},[a("div",{staticClass:"modal-content"},[t._m(0),a("div",{staticClass:"modal-body"},[a("div",{staticClass:"tweet-container"},[a("div",{staticClass:"flow-bar"}),a("img",{staticClass:"avator",attrs:{src:t.tweetDataForModel.User.avatar||"https://i.imgur.com/S4PE66O.png",alt:""}}),a("div",{staticClass:"detail w-100"},[a("div",{staticClass:"info"},[a("div",{staticClass:"name"},[t._v(t._s(t.tweetDataForModel.User.name))]),a("div",{staticClass:"at-detail"},[a("span",{staticClass:"tweet-at"},[t._v(" @"+t._s(t.tweetDataForModel.User.account))]),a("span",[t._v("・")]),a("span",{staticClass:"reply-time"},[t._v(t._s(t._f("fromNow")(t.tweetDataForModel.createdAt)))])])]),a("div",{staticClass:"tweet-text"},[t._v(" "+t._s(t.tweetDataForModel.description)+" ")]),a("div",[a("span",{staticClass:"reply"},[t._v("回覆給")]),a("span",{staticClass:"reply-to-user-at"},[t._v("@"+t._s(t.tweetDataForModel.User.account))])])])]),a("div",{staticClass:"d-flex reply-tweet-form"},[a("div",{staticClass:"flow-bar"}),a("img",{attrs:{src:t.currentUser.avatar||"https://i.imgur.com/S4PE66O.png",alt:"no photo"}}),a("form",{staticClass:"d-flex flex-column w-100",on:{submit:function(t){t.stopPropagation(),t.preventDefault()}}},[a("textarea",{directives:[{name:"model",rawName:"v-model",value:t.comment,expression:"comment"}],staticClass:"form-textarea w-100",attrs:{name:"text",id:"replyTweet",rows:"3",placeholder:"回覆貼文",autofocus:""},domProps:{value:t.comment},on:{input:function(e){e.target.composing||(t.comment=e.target.value)}}}),a("button",{staticClass:"btn-reply-submit align-self-end",attrs:{type:"submit","data-dismiss":"modal"},on:{click:function(e){return t.handleReplySubmit(t.tweetDataForModel.id)}}},[t._v(" 回覆 ")])])]),a("div",{staticClass:"tweet-replies-box"},t._l(t.tweetRepliesForModal,(function(e){return a("div",{key:e.id,staticClass:"replyer"},[a("div",{staticClass:"flow-bar"}),a("router-link",{attrs:{to:{name:"user",params:{userId:e.UserId}},"data-dismiss":"modal"}},[a("img",{staticClass:"replyer-avator",attrs:{src:e.User.avatar||"https://i.imgur.com/S4PE66O.png",alt:""}})]),a("div",{staticClass:"reply-detail w-100"},[a("div",{staticClass:"replyer-info d-flex"},[a("router-link",{staticClass:"hover-underline",attrs:{to:{name:"user",params:{userId:e.UserId}},"data-dismiss":"modal"}},[a("div",{staticClass:"replyer-name"},[t._v(t._s(e.User.name))])]),a("div",{staticClass:"at-detail"},[a("span",{staticClass:"replyer-at"},[t._v(" @"+t._s(e.User.account))]),a("span",[t._v("・")]),a("span",{staticClass:"reply-time"},[t._v(t._s(t._f("fromNow")(e.createdAt)))])])],1),a("div",[a("span",{staticClass:"reply"},[t._v("回覆給")]),a("span",{staticClass:"reply-to-user-at"},[t._v("@"+t._s(t.tweetDataForModel.User.account))])]),a("div",{staticClass:"reply-text"},[t._v(" "+t._s(e.comment)+" ")])])],1)})),0)])])])])],2)},s=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"modal-header"},[a("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[a("div",{staticClass:"btn-cancel pointer"})])])}],n=(a("d81d"),a("498a"),a("5530")),i=(a("96cf"),a("1da1")),o=a("2193"),c=a("d271"),l=a("c1df"),u=a.n(l),d=a("7482"),p=a("1602"),v=a("a2a9"),w=a("2fa3"),m=a("2f62"),f={components:{ReplyIcon:o["a"],LikeIcon:c["a"],IconLikeFill:v["a"]},props:{initialTweets:{type:Array,required:!0}},data:function(){return{tweets:this.initialTweets,comment:"",tweetId:-1,tweetDataForModel:{User:{account:"",avatar:"",id:-1,name:"User1"},UserId:-1,createdAt:"",description:"",id:-1},tweetRepliesForModal:[]}},methods:{getTweetForModel:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d["a"].getUserTweet({tweetId:t});case 3:r=a.sent,s=r.data,e.tweetId=t,e.tweetDataForModel=s,a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log(a.t0),w["a"].fire({icon:"error",title:"無法發送回覆，請稍後再試"});case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()},handleReplySubmit:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(a.prev=0,e.createdAt=Date.now(),""!==e.comment.trim()){a.next=7;break}return w["a"].fire({icon:"error",title:"親愛的用戶，請勿發空空的思念。"}),a.abrupt("return");case 7:if(!(e.comment.length>140)){a.next=10;break}return w["a"].fire({icon:"error",title:"推文字數超過140囉！"}),a.abrupt("return");case 10:return a.next=12,p["a"].addUserReply({tweetId:e.tweetId,comment:e.comment,createdAt:e.createdAt});case 12:if(r=a.sent,200===r.status){a.next=15;break}throw new Error(r);case 15:e.comment="",e.tweets=e.tweets.map((function(e){if(e.id===t){var a=e.repliesCount+1;return Object(n["a"])(Object(n["a"])({},e),{},{repliesCount:a})}return e})),a.next=23;break;case 19:a.prev=19,a.t0=a["catch"](0),console.log(a.t0),w["a"].fire({icon:"error",title:"無法發送回覆，請稍後再試"});case 23:case"end":return a.stop()}}),a,null,[[0,19]])})))()},addLike:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d["a"].addTweetLike({tweetId:t});case 3:if(r=a.sent,"success"===r.data.status){a.next=6;break}throw new Error(r.data.message);case 6:e.tweets=e.tweets.map((function(e){if(e.id===t){var a=e.likesCount+1;return Object(n["a"])(Object(n["a"])({},e),{},{isLiked:!0,likesCount:a})}return e})),a.next=13;break;case 9:a.prev=9,a.t0=a["catch"](0),console.log(a.t0),w["a"].fire({icon:"error",title:"無法點愛心，請稍後再試"});case 13:case"end":return a.stop()}}),a,null,[[0,9]])})))()},deleteLike:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,d["a"].deleteTweetLike({tweetId:t});case 3:if(r=a.sent,"success"===r.data.status){a.next=6;break}throw new Error(r.data.message);case 6:e.tweets=e.tweets.map((function(e){if(e.id===t){var a=e.likesCount-1;return Object(n["a"])(Object(n["a"])({},e),{},{isLiked:!1,likesCount:a})}return e})),e.$emit("after-click-delete-like",{tweets:e.tweets}),a.next=14;break;case 10:a.prev=10,a.t0=a["catch"](0),console.log(a.t0),w["a"].fire({icon:"error",title:"無法取消愛心，請稍後再試"});case 14:case"end":return a.stop()}}),a,null,[[0,10]])})))()},updateRepliesInModal:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function a(){var r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,e.tweetRepliesForModal=[],a.next=4,d["a"].getTweetReplies({tweetId:t});case 4:if(r=a.sent,200===r.status){a.next=7;break}throw new Error(r.statusText);case 7:e.tweetRepliesForModal=r.data,console.log(e.tweetRepliesForModal),a.next=15;break;case 11:a.prev=11,a.t0=a["catch"](0),console.log(a.t0),w["a"].fire({icon:"error",title:"無法取得該文回覆資料，請稍後再試"});case 15:case"end":return a.stop()}}),a,null,[[0,11]])})))()}},computed:Object(n["a"])({},Object(m["b"])(["currentUser","isAuthenticated"])),watch:{initialTweets:function(t){this.tweets=t}},created:function(){},filters:{fromNow:function(t){return t?u()(t).fromNow():"-"}}},C=f,h=(a("93c2"),a("2877")),b=Object(h["a"])(C,r,s,!1,null,"2ea45388",null);e["a"]=b.exports},c8d2:function(t,e,a){var r=a("d039"),s=a("5899"),n="​᠎";t.exports=function(t){return r((function(){return!!s[t]()||n[t]()!=n||s[t].name!==t}))}},d271:function(t,e,a){"use strict";var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("svg",{attrs:{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[a("path",{attrs:{d:"M7.5 13.5239H7.49125C5.87687 13.4939 1.21875 9.28514 1.21875 5.29889C1.21875 3.38389 2.79687 1.70264 4.59562 1.70264C6.02687 1.70264 6.98937 2.69014 7.49937 3.40889C8.00812 2.69139 8.97062 1.70264 10.4025 1.70264C12.2025 1.70264 13.78 3.38389 13.78 5.29951C13.78 9.28451 9.12125 13.4933 7.50687 13.5226H7.5V13.5239ZM4.59625 2.64076C3.29625 2.64076 2.15687 3.88326 2.15687 5.30014C2.15687 8.88764 6.55312 12.5476 7.50062 12.5864C8.44937 12.5476 12.8444 8.88826 12.8444 5.30014C12.8444 3.88326 11.705 2.64076 10.405 2.64076C8.825 2.64076 7.9425 4.47576 7.935 4.49389C7.79125 4.84514 7.2125 4.84514 7.06812 4.49389C7.05937 4.47514 6.1775 2.64076 4.59687 2.64076H4.59625Z",fill:"#657786"}})])},s=[],n=a("2877"),i={},o=Object(n["a"])(i,r,s,!1,null,null,null);e["a"]=o.exports},d81d:function(t,e,a){"use strict";var r=a("23e7"),s=a("b727").map,n=a("1dde"),i=a("ae40"),o=n("map"),c=i("map");r({target:"Array",proto:!0,forced:!o||!c},{map:function(t){return s(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);
//# sourceMappingURL=chunk-08e0f65f.087e38ba.js.map