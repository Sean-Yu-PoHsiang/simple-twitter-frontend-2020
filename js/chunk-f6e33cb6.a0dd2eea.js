(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-f6e33cb6"],{2193:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{attrs:{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M8.77881 1.40127L6.18631 1.39502H6.18506C3.45131 1.39502 1.31006 3.53689 1.31006 6.27127C1.31006 8.83252 3.30131 10.775 5.97568 10.8775V13.27C5.97568 13.3375 6.00318 13.4488 6.05068 13.5219C6.13943 13.6625 6.29068 13.7388 6.44568 13.7388C6.53193 13.7388 6.61881 13.715 6.69693 13.665C6.86193 13.56 10.7426 11.0775 11.7519 10.2238C12.9407 9.21752 13.6519 7.74252 13.6538 6.27877V6.26814C13.6501 3.53877 11.5101 1.40127 8.77881 1.40064V1.40127ZM11.1457 9.50877C10.4369 10.1088 8.10693 11.6369 6.91318 12.4106V10.4188C6.91318 10.16 6.70381 9.95002 6.44443 9.95002H6.19693C3.90943 9.95002 2.24818 8.40252 2.24818 6.27127C2.24818 4.06252 3.97818 2.33252 6.18568 2.33252L8.77756 2.33877H8.77881C10.9863 2.33877 12.7163 4.06752 12.7176 6.27377C12.7157 7.46752 12.1288 8.67627 11.1463 9.50877H11.1457Z",fill:"#657786"}})])},a=[],n=r("2877"),i={},c=Object(n["a"])(i,s,a,!1,null,null,null);t["a"]=c.exports},"35d0":function(e,t,r){"use strict";r("93b3")},"498a":function(e,t,r){"use strict";var s=r("23e7"),a=r("58a8").trim,n=r("c8d2");s({target:"String",proto:!0,forced:n("trim")},{trim:function(){return a(this)}})},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,r){var s=r("1d80"),a=r("5899"),n="["+a+"]",i=RegExp("^"+n+n+"*"),c=RegExp(n+n+"*$"),o=function(e){return function(t){var r=String(s(t));return 1&e&&(r=r.replace(i,"")),2&e&&(r=r.replace(c,"")),r}};e.exports={start:o(1),end:o(2),trim:o(3)}},"6f1a":function(e,t,r){"use strict";r.r(t);var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"col main-container main-area-rwd vh100scroll"},[r("UserTweet",{attrs:{initialUserTweet:e.userTweet},on:{"after-reply-tweet":e.afterReplyTweet}}),r("TweetReplies",{attrs:{initialTweetReplies:e.tweetReplies,initialUserTweet:e.userTweet}})],1)},a=[],n=(r("96cf"),r("1da1")),i=r("5530"),c=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"replies-box"},[0===e.tweetReplies.length?r("div",{staticClass:"d-flex justify-content-center"},[r("p",{staticClass:"p-3 text-black-50"},[e._v("No replies")])]):e._e(),e._l(e.tweetReplies,(function(t){return r("div",{key:t.id,staticClass:"replyer"},[r("router-link",{attrs:{to:{name:"user",params:{userId:t.User.id}}}},[r("img",{staticClass:"replyer-avator",attrs:{src:t.User.avatar||"https://i.imgur.com/S4PE66O.png",alt:""}})]),r("div",{staticClass:"reply-detail"},[r("div",{staticClass:"replyer-info"},[r("router-link",{attrs:{to:{name:"user",params:{userId:t.User.id}}}},[r("div",{staticClass:"replyer-name"},[e._v(e._s(t.User.name))])]),r("div",{staticClass:"at-detail"},[r("span",{staticClass:"replyer-at"},[e._v(" @"+e._s(t.User.account))]),r("span",[e._v("・")]),r("span",{staticClass:"reply-time"},[e._v(e._s(e._f("fromNow")(t.createdAt)))])])],1),r("div",[r("span",{staticClass:"reply"},[e._v("回覆")]),r("span",{staticClass:"reply-to-user-at"},[e._v("@"+e._s(e.userTweet.User.account))])]),r("div",{staticClass:"reply-text"},[e._v(e._s(t.comment))])])],1)}))],2)},o=[],l=r("c1df"),u=r.n(l),d={props:{initialTweetReplies:{type:Array,required:!0},initialUserTweet:{type:Object,required:!0}},data:function(){return{tweetReplies:this.initialTweetReplies,userTweet:this.initialUserTweet}},watch:{initialTweetReplies:function(e){this.tweetReplies=e},initialUserTweet:function(e){this.userTweet=e}},filters:{fromNow:function(e){return e?u()(e).fromNow():"-"}}},p=d,f=(r("35d0"),r("2877")),w=Object(f["a"])(p,c,o,!1,null,"5e7b2ea1",null),v=w.exports,m=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-user-container"},[r("div",[r("router-link",{staticClass:"previous-page",attrs:{to:"/"}},[r("div",{staticClass:"arrow-icon"},[r("ArrowIcon")],1),r("div",{staticClass:"title"},[e._v("推文")])])],1),r("div",{staticClass:"user-area"},[r("div",{staticClass:"user-detail"},[r("router-link",{attrs:{to:{name:"user",params:{userId:e.userTweet.User.id}}}},[r("img",{staticClass:"user-avator",attrs:{src:e.userTweet.User.avatar||"https://i.imgur.com/S4PE66O.png",alt:""}})]),r("span",{staticClass:"connect-line"}),r("div",{staticClass:"reply-detail"},[r("router-link",{attrs:{to:{name:"user",params:{userId:e.userTweet.User.id}}}},[r("div",{staticClass:"user-name"},[e._v(e._s(e.userTweet.User.name))])]),r("div",[r("span",{staticClass:"user-self-at"},[e._v("@"+e._s(e.userTweet.User.account))])])],1)],1),r("div",{staticClass:"tweet-text"},[r("p",[e._v(" "+e._s(e.userTweet.description)+" ")])]),r("div",{staticClass:"tweet-upload-time"},[r("div",[e._v(e._s(e._f("dateInMandarin")(e.userTweet.createdAt)))])]),r("div",{staticClass:"count-container"},[r("div",{staticClass:"count-info"},[r("p",{staticClass:"replies-count"},[e._v(e._s(e.userTweet.repliesCount))]),r("p",{staticClass:"count-title"},[e._v("回覆")])]),r("div",{staticClass:"count-info"},[r("p",{staticClass:"likes-count"},[e._v(e._s(e.userTweet.likesCount))]),r("p",{staticClass:"count-title"},[e._v("喜歡次數")])])]),r("div",{staticClass:"reply-and-like-btn-container"},[r("div",[r("button",{staticClass:"btn-reply",attrs:{type:"button","data-toggle":"modal","data-target":"#replyModal"}},[r("ReplyIcon",{staticClass:"reply-icon"})],1)]),r("div",[e.userTweet.isLiked?r("button",{staticClass:"btn-unlike",attrs:{type:"button"},on:{click:function(t){return e.deleteLike(e.userTweet.id)}}},[r("IconLikeFill",{staticClass:"unlike-icon"})],1):r("button",{staticClass:"btn-like",attrs:{type:"button"},on:{click:function(t){return e.addLike(e.userTweet.id)}}},[r("LikeIcon",{staticClass:"like-icon"})],1)])])]),r("div",{staticClass:"modal fade",attrs:{id:"replyModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true"}},[r("div",{staticClass:"modal-dialog"},[r("div",{staticClass:"modal-content"},[e._m(0),r("div",{staticClass:"modal-body"},[r("div",{staticClass:"tweet-container"},[r("img",{staticClass:"avator",attrs:{src:e.userTweet.User.avatar||"https://i.imgur.com/S4PE66O.png",alt:""}}),r("div",{staticClass:"detail"},[r("div",{staticClass:"info"},[r("div",{staticClass:"name"},[e._v(e._s(e.userTweet.User.name))]),r("div",{staticClass:"at-detail"},[r("span",{staticClass:"tweet-at"},[e._v(" @"+e._s(e.userTweet.User.account))]),r("span",[e._v("・")]),r("span",{staticClass:"reply-time"},[e._v(e._s(e._f("fromNow")(e.userTweet.createdAt)))])])]),r("div",[r("span",{staticClass:"reply"},[e._v("回覆給")]),r("span",{staticClass:"reply-to-user-at"},[e._v("@"+e._s(e.userTweet.User.account))])]),r("div",{staticClass:"tweet-text"},[e._v(e._s(e.userTweet.description))])])]),r("div",{staticClass:"d-flex"},[r("img",{attrs:{src:e.currentUser.avatar||"https://i.imgur.com/S4PE66O.png",alt:"no photo"}}),r("form",{staticClass:"d-flex flex-column w-100",on:{submit:function(e){e.stopPropagation(),e.preventDefault()}}},[r("textarea",{directives:[{name:"model",rawName:"v-model",value:e.comment,expression:"comment"}],staticClass:"form-textarea w-100",attrs:{name:"text",id:"replyTweet",rows:"6",placeholder:"回覆貼文",autofocus:""},domProps:{value:e.comment},on:{input:function(t){t.target.composing||(e.comment=t.target.value)}}}),r("button",{staticClass:"btn-reply-submit align-self-end",attrs:{type:"submit","data-dismiss":"modal"},on:{click:function(t){return e.handleReplySubmit(e.userTweet.id)}}},[e._v(" 回覆 ")])])])])])])])])},C=[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"modal-header"},[r("button",{staticClass:"close",attrs:{type:"button","data-dismiss":"modal","aria-label":"Close"}},[r("div",{staticClass:"btn-cancel pointer"})])])}],h=(r("498a"),r("7034")),g=r("2193"),b=r("d271"),T=r("a2a9"),_=r("2fa3"),y=r("1602"),k=r("7482"),x=r("2f62"),R={components:{ArrowIcon:h["a"],ReplyIcon:g["a"],LikeIcon:b["a"],IconLikeFill:T["a"]},props:{initialUserTweet:{type:Object,required:!0}},data:function(){return{userTweet:{User:{id:-1}},comment:"",createdAt:-1}},computed:Object(i["a"])({},Object(x["b"])(["currentUser","isAuthenticated"])),created:function(){},watch:{initialUserTweet:function(e){this.userTweet=e}},methods:{handleReplySubmit:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:if(t.createdAt=Date.now(),""!==t.comment.trim()){r.next=6;break}return _["a"].fire({icon:"error",title:"親愛的用戶，請勿發空空的思念。"}),r.abrupt("return");case 6:if(!(t.comment.length>140)){r.next=9;break}return _["a"].fire({icon:"error",title:"推文字數超過140囉！"}),r.abrupt("return");case 9:return r.prev=9,r.next=12,y["a"].addUserReply({tweetId:e,comment:t.comment,createdAt:t.createdAt});case 12:if(s=r.sent,"success"===s.data.status){r.next=15;break}throw new Error(s.data.message);case 15:t.userTweet.repliesCount++,t.$emit("after-reply-tweet",{tweetId:e,comment:t.comment,createdAt:t.createdAt}),t.comment="",r.next=24;break;case 20:r.prev=20,r.t0=r["catch"](9),console.log(r.t0),_["a"].fire({icon:"error",title:"無法發送回覆，請稍後再試"});case 24:case"end":return r.stop()}}),r,null,[[9,20]])})))()},addLike:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,k["a"].addTweetLike({tweetId:e});case 3:if(s=r.sent,console.log(">>>>>>>>>",s),"success"===s.data.status){r.next=7;break}throw new Error(s.data.message);case 7:t.userTweet.likesCount++,t.userTweet.isLiked=!0,r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log(r.t0),_["a"].fire({icon:"error",title:"無法點愛心，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()},deleteLike:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,k["a"].deleteTweetLike({tweetId:e});case 3:if(s=r.sent,console.log(s),"success"===s.data.status){r.next=7;break}throw new Error(s.data.message);case 7:t.userTweet.likesCount--,t.userTweet.isLiked=!1,r.next=15;break;case 11:r.prev=11,r.t0=r["catch"](0),console.log(r.t0),_["a"].fire({icon:"error",title:"無法取消愛心，請稍後再試"});case 15:case"end":return r.stop()}}),r,null,[[0,11]])})))()}},filters:{dateInMandarin:function(e){if(!e)return"-";var t=u()(e).calendar();return t},fromNow:function(e){return e?u()(e).fromNow():"-"}}},U=R,I=(r("c0dd"),Object(f["a"])(U,m,C,!1,null,"013c8c66",null)),A=I.exports,L=r("ec26"),O={components:{TweetReplies:v,UserTweet:A},data:function(){return{userTweet:{},tweetReplies:[]}},computed:Object(i["a"])({},Object(x["b"])(["currentUser","isAuthenticated"])),created:function(){var e=this.$route.params;this.fetchUserTweet(e),this.fetchTweetReplies(e)},methods:{fetchUserTweet:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,k["a"].getUserTweet(e);case 3:s=r.sent,a=s.data,t.userTweet=a,console.log("this.userTweet",t.userTweet),r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0),_["a"].fire({icon:"error",title:"無法取得使用者資料，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},fetchTweetReplies:function(e){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function r(){var s,a;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,k["a"].getTweetReplies(e);case 3:s=r.sent,a=s.data,t.tweetReplies=a,console.log("this.tweetReplies",t.tweetReplies),r.next=13;break;case 9:r.prev=9,r.t0=r["catch"](0),console.log(r.t0),_["a"].fire({icon:"error",title:"無法取得該文回覆資料，請稍後再試"});case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))()},afterReplyTweet:function(e){var t=e.tweetId,r=e.comment,s=e.createdAt;this.tweetReplies.unshift({User:this.currentUser,tweetId:t,comment:r,createdAt:s,id:Object(L["a"])()})}}},j=O,E=Object(f["a"])(j,s,a,!1,null,"ccf03bc4",null);t["default"]=E.exports},7034:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"17",height:"14",viewBox:"0 0 17 14",fill:"none"}},[r("path",{attrs:{d:"M16 5.99988H3.41399L7.70699 1.70687C8.09699 1.31687 8.09699 0.683875 7.70699 0.292875C7.31699 -0.0981249 6.68399 -0.0971249 6.29299 0.292875L0.292988 6.29288C-0.0970117 6.68288 -0.0970117 7.31588 0.292988 7.70687L6.29299 13.7069C6.48799 13.9019 6.74299 13.9999 6.99999 13.9999C7.25699 13.9999 7.51199 13.9019 7.70699 13.7069C8.09699 13.3169 8.09699 12.6839 7.70699 12.2929L3.41399 7.99988H16C16.553 7.99988 17 7.55288 17 6.99988C17 6.44688 16.553 5.99988 16 5.99988Z",fill:"black"}})])},a=[],n=r("2877"),i={},c=Object(n["a"])(i,s,a,!1,null,null,null);t["a"]=c.exports},7482:function(e,t,r){"use strict";var s=r("2fa3"),a=function(){return localStorage.getItem("token")};t["a"]={getAllTweets:function(){return s["b"].get("/tweets",{headers:{Authorization:"Bearer ".concat(a())}})},getUserTweet:function(e){var t=e.tweetId;return s["b"].get("/tweets/".concat(t),{headers:{Authorization:"Bearer ".concat(a())}})},getTweetReplies:function(e){var t=e.tweetId;return s["b"].get("/tweets/".concat(t,"/replies"),{headers:{Authorization:"Bearer ".concat(a())}})},addTweetLike:function(e){var t=e.tweetId;return s["b"].post("/tweets/".concat(t,"/like"),null,{headers:{Authorization:"Bearer ".concat(a())}}).then((function(e){return e})).catch((function(e){return e.response}))},deleteTweetLike:function(e){var t=e.tweetId;return s["b"].post("/tweets/".concat(t,"/unlike"),null,{headers:{Authorization:"Bearer ".concat(a())}}).then((function(e){return e})).catch((function(e){return e.response.data}))}}},"93b3":function(e,t,r){},a2a9:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{attrs:{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none"}},[r("path",{attrs:{d:"M12 21.6381H11.986C9.403 21.5901 1.95 14.8561 1.95 8.47812C1.95 5.41412 4.475 2.72412 7.353 2.72412C9.643 2.72412 11.183 4.30412 11.999 5.45412C12.813 4.30612 14.353 2.72412 16.644 2.72412C19.524 2.72412 22.048 5.41412 22.048 8.47912C22.048 14.8551 14.594 21.5891 12.011 21.6361H12V21.6381Z",fill:"#E0245E"}})])},a=[],n=r("2877"),i={},c=Object(n["a"])(i,s,a,!1,null,null,null);t["a"]=c.exports},c0dd:function(e,t,r){"use strict";r("ced8")},c8d2:function(e,t,r){var s=r("d039"),a=r("5899"),n="​᠎";e.exports=function(e){return s((function(){return!!a[e]()||n[e]()!=n||a[e].name!==e}))}},ced8:function(e,t,r){},d271:function(e,t,r){"use strict";var s=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("svg",{attrs:{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg"}},[r("path",{attrs:{d:"M7.5 13.5239H7.49125C5.87687 13.4939 1.21875 9.28514 1.21875 5.29889C1.21875 3.38389 2.79687 1.70264 4.59562 1.70264C6.02687 1.70264 6.98937 2.69014 7.49937 3.40889C8.00812 2.69139 8.97062 1.70264 10.4025 1.70264C12.2025 1.70264 13.78 3.38389 13.78 5.29951C13.78 9.28451 9.12125 13.4933 7.50687 13.5226H7.5V13.5239ZM4.59625 2.64076C3.29625 2.64076 2.15687 3.88326 2.15687 5.30014C2.15687 8.88764 6.55312 12.5476 7.50062 12.5864C8.44937 12.5476 12.8444 8.88826 12.8444 5.30014C12.8444 3.88326 11.705 2.64076 10.405 2.64076C8.825 2.64076 7.9425 4.47576 7.935 4.49389C7.79125 4.84514 7.2125 4.84514 7.06812 4.49389C7.05937 4.47514 6.1775 2.64076 4.59687 2.64076H4.59625Z",fill:"#657786"}})])},a=[],n=r("2877"),i={},c=Object(n["a"])(i,s,a,!1,null,null,null);t["a"]=c.exports},ec26:function(e,t,r){"use strict";var s,a=new Uint8Array(16);function n(){if(!s&&(s="undefined"!==typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!==typeof msCrypto&&"function"===typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto),!s))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return s(a)}var i=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function c(e){return"string"===typeof e&&i.test(e)}for(var o=c,l=[],u=0;u<256;++u)l.push((u+256).toString(16).substr(1));function d(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!o(r))throw TypeError("Stringified UUID is invalid");return r}var p=d;function f(e,t,r){e=e||{};var s=e.random||(e.rng||n)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=s[a];return t}return p(s)}t["a"]=f}}]);
//# sourceMappingURL=chunk-f6e33cb6.a0dd2eea.js.map